<%= header_links %>
<div class="BookingsContainer">
  <h2>予約済み一覧</h2>
  <div class="table-responsive">
    <table class="table">
      <thead>
        <tr>
          <th>画像</th>
          <th>施設名</th>
          <th>紹介文</th>
          <th class="text-nowrap">合計料金</th>
          <th class="text-nowrap">チェックイン</th>
          <th class="text-nowrap">チェックアウト</th>
          <th class="text-nowrap">予約確定日時</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <% @bookings.each do |booking| %>
        <tr>
          <td>
            <%= link_to room_path(booking.room) do%>
            <%= booking.room.roomimage? ? image_tag(booking.room.roomimage.url) : image_tag("room.png") %>
            <% end %>
          </td>
          <td>
            <%= link_to room_path(booking.room) do %>
            <p><%= booking.room.name %></p>
            <% end %>
          </td>
          <td>
            <p><%= booking.room.description %></p>
          </td>
          <td class="text-nowrap">
            <p>¥<%= number_with_delimiter(booking.total_price) %></p>
          </td>
          <td class="text-nowrap">
            <p><%= booking.checkin_date.strftime("%Y/%m/%d") %></p>
          </td>
          <td class="text-nowrap">
            <p><%= booking.checkout_date.strftime("%Y/%m/%d") %></p>
          </td>
          <td class="text-nowrap">
            <p><%= booking.created_at.strftime("%Y/%m/%d %H:%M") %></p>
          </td>
          <td>
                <div class="dropdown">
                  <div class="d-flex align-items-center justify-content-center" id="dropdown-button" data-bs-toggle="dropdown" aria-expanded="false">
                    <%= image_tag ("three-dot-menu.svg") %>
                  </div>
                  <ul class="dropdown-menu DropdownMenu" aria-labelledby="dropdown-button">
                    <li class="dropdown-item"><%= link_to "編集", edit_booking_path(booking) %></li>
                    <li class="dropdown-item danger"><%= link_to "削除",booking_path(booking), data: { turbo_method: :delete } %></li>
                  </ul>  
                </div>
              </td>
        </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>
<%= render 'layouts/shared/footer' %>
